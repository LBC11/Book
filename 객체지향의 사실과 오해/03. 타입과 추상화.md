# 03. 타입과 추상화

해리 백은 현대적인 지하철 노선도의 원형을 디자인하였다. 이는 당시 지도가 당연히 가져야 한다고 생각되는 ‘정확성’을 버리고 노선도의 본래 **'목적'** 에 집중한 결과이다. 이와 같이 목적에 집중하여 다른 복잡한 요소들을 제외하는 것을 **‘추상화’** 라고 한다.

## 1. 추상화를 통한 복잡성 극복

인간이 인지하기에 현실은 너무 복잡하다. 이를 극복하기 위해 인간은 자신도 모르게 추상화를 통해 사물을 이해하는 경향이 있다. 객체지향 패러다임 역시 이를 이용한다.

**추상화**

어떤 양상, 세부사항, 구조를 좀 더 명확하게 이해하기 위해(목적을 이루기 위해) 특정 절차나 물체를 의도적으로 생략하거나 감춤으로써 복잡도를 극복하는 방법이다.

복잡성을 다루기 위해 추상화는 두 차원에서 이뤄진다.

- **첫 번째 차원**은 구체적인 사물들 간의 공통점은 취하고 차이점은 버리는 일반화를 통해 단순하게 만드는 것이다.
- **두번째 차원**은 중요한 부분을 강조하기 위해 불필요한 세부사항을 제거함으로써 단순하게 만드는 것이다.

모든 경우에 추상화의 목적은 복잡성을 이해하기 쉬운 수준으로 단순화하는 것이다..

## 2. 객체지향과 추상화

‘기껏해야 트럼프에 불과해’ 라는 대사에서 알 수 있듯이 앨리스는 다음과 같이 분류하였다.

- 트럼프: 정원사, 병사, 신하, 왕자와 공주, 하객으로 참석한 왕과 왕비들, 하트책, 하트 왕과 하트 여왕
- 토끼: 회중시계를 가진 하얀 토끼

객체들을 ‘트럼프’, ‘토끼’ 라는 그룹으로 나누어 복잡한 현실을 깔끔하게 추상화해 버린 것이다.

이처럼 공통점을 기반으로 객체들을 묶기 위한 그릇을 **‘개념(concept)’** 이라고 한다.

이를 정리하면 다음과 같다.

**객체**란 특정한 **개념**을 적용할 수 있는 **구체적인 사물**을 의미한다. 개념이 객체에 적용됐을 때 객체를 **개념의 인터턴스**라고 한다.

**개념의 세가지 관점**

- **심볼(symbol)**: 개념을 가리키는 간략한 이름이나 명칭
- **내연(intension)**: 개념의 완전한 정의를 나타내며 내연의 의미를 이용해 객체가 개념에 속하는지 여부를 확인할 수 있다.
- **외연(extension)**: 개념에 속하는 모든 객체의 집합(set)

트럼프를 위의 관점으로 정리하면 다음과 같다.

- **심볼(symbol)**: 트럼프
- **내연(intension)**: 몸이 납작하고 두 손과 두 발은 네모 귀퉁이에 달려 있는 등장인물
- **외연(extension)**: 정원사, 병사, 왕자와 공주, 하객으로 참석한 왕과 왕비, 하트 잭, 하트 왕과 하트 여왕

**분류**

**분류(classification)** 란 객체에 특정한 개념을 적용하는 작업이다. 객체에 특정한 개념을 적용하기로 결심했을 때 우리는 그 객체를 특정한 집합의 멤버로 분류하는 것이다.

- 객체지향에서 class가 중요한 개념인 것을 감안하면 분류(classification) 역시 중요하다는 것을 알 수 있을 것이다.
- 어떤 객체를 어떤 개념을 분류할지가 객체지향의 품질을 결정한다.

객체지향의 설계 단계(이건 지금까지를 읽고 내 생각)

1. 협력에 필요한 객체 생성
2. 객체들 사이에서 공통점을 기준으로 분류 진행
3. 분류를 바탕으로 class를 생성

**질문!!!!** 

앞에서 설명한 예시의 분류의 경우 트럼프라는 공통점을 기준으로 그 외 차이점은 무시한 결과이다. 그래서 첫번째 차원을 적용한 결과라는 것은 이해가 된다. 그런데 중요하다고 생각하는 특징은 트럼프의 특징이니 그 외를 무시해서 두번째 차원 역시 적용되었다는 점은 긴가민가하다. 공통점과 중요하다고 생각되는 점이 같아서 이렇게 한번에 두 차원이 동시에 적용되었다는 것인가???

첫번째 차원이 더 넓은 범위를 포함하는 부모 클래스, 두번째 차원이 부모 클래스에 속해있는 자식 class라고 생각하면 쉽다.

## 3. 타입

개념이라는 용어를 컴퓨터 공학으로 가져온 것이 바로 타입(type)이다.

**타입(type)** 은 개념과 동일하다. 따라서 타입이란 우리가 인지하고 있는 다양한 사물이나 객체에 적용할 수 있는 아이디어나 관념을 의미한다. 어떤 객체에 타입을 적용할 수 있을 때 그 객체를 타입의 인스턴스라고 한다. 타입의 인스턴스는 타입을 구성하는 외면인 객체 집합의 일원이 된다.

이를 이용한 예시 중 하나가 **데이터 타입(data type)** 이다.

**데이터 타입**은 메모리 안에 저장된 데이터의 종류를 분류하는 데 사용하는 메모리 집합에 관한 메타데이터다. 데이터에 대한 분류는 임시적으로 어떤 종류의 연산이 해당 데이터에 대해 수행될 수 있는지를 결정한다. 

위의 명제에서 주목할 점은 분류의 기준이 **처리 가능한 메시지(message)** 라는 것이다. 이와 같이 **객체** 역시 같은 동일한 타입으로 분류되는 기준은 **객체의 행동**이다.

**행동이 우선이다.**

내부 표현 방식이 얼마나 다르든 상관없이 **동일한 메시지(message)** 를 처리할 수 있다면 **같은 타입**으로 분류되어야 한다. 같은 상태를 가졌어도 **행동이 다르다면** 둘은 **다른 타입**이다. 이를 통해 캡슐화 역시 철저하게 지켜질 수 있다. 

**객체를 결정하는 것은 결국 행동이다.** 데이터는 단지 행동을 따를 뿐이다. 이것이 객체를 객체답게 만드는 가장 핵심적인 원칙이다.

## 4. 타입과 계층

사실 트럼프로 분류된 객체들은 진짜 트럼프와 행동이 완전히 같지는 않다. 이를 바탕으로 세세하게 분류해보면 트럼프라는 타입속에 트럼프 인간이라는 타입이 존재한다는 것을 알 수 있다. → 타입에도 계층이 존재한다.

이러한 계층 관계를 **일반화/특수화(generation/specialization)** 이라고 한다.

- 일반화와 특수화는 동시에 일어난다.
- 일반화: 개념적으로 더 넓은 범위에 적용가능한 타입을 의미한다. 상위 계층의 타입(트럼프)
- 특수화: 개념적으로 더 좁은 범위에 적용하능한 타입을 의미한다. 하위 계층의 타입(트럼프 인간)
- 기준은 **상태가 아니라 행동이다.**

- **일반화 → 슈퍼타입(supertype)**
- **특수화 → 서브타입(subtype)**

그래서 a가 b의 서브타입이라고 한다면 a는 b를 대체할 수 있어야 한다. 

## 5. 정적 모델

**타입은 추상화다.**

타입을 이용하면 시간에 따른 객체의 상태 변경이라는 동적인 특성을 단순하게 추상화할 수 있다. 이를 통해 객체지향에서는 다음의 두 가지 모델이 존재한다.

**동적 모델과 정적 모델**

- **동적 모델(dynamic model)**: 스냅샷처럼 실제로 객체가 살아 움직이는 동안 상태가 어떻게 변하고 어떻게 행동하는지를 포착하는 것
- **정적 모델(static model)**: 객체가 가질 수 있는 모든 상태와 모든 행동을 시간에 독립적으로 표현한 것. **타입 모델(type diagram)** 이라고도 부른다.
- 객체지향 애플리케이션을 설계하고 구현하기 위해서는 객체 관점의 동적모델과 객체를 추상화한 타입 관점의 정적 모델을 적절하게 혼용해야 한다.

타입을 구현하는 가장 보편적인 방법은 클래스를 이용하는 것이다. 구현 방법일 뿐이지 둘은 같은 것이 아니라는 것을 주의해라.

결국 객체지향에서 중요한 것은 동적으로 변하는 객체의 **‘상태’** 와 상태를 변경하는 **‘행위’** 다. 클래스는 타입을 구현하기 위해 프로그래밍 언어에서 제공하는 구현 메커니즘일 뿐이다.
